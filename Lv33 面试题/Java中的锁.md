# Java中的锁

## 公平锁、非公平锁

- 公平锁

  是指多个线程按照申请锁的顺序来获取锁，类似排队打饭 先来后到。 

- 非公平锁

  是指在多线程获取锁的顺序并不是按照申请锁的顺序，有可能后申请的线程比先申请的线程优先获取到锁，在高并发的情况下，有可能造成优先级反转或者饥饿现象。

  Synchronized是非公平锁，  并发包ReentrantLock的创建可以指定构造函数的boolean类型来得到公平锁或者非公平锁 默认是非公平锁， 非公平锁的优点在于吞吐量必公平锁大。

## 可重入锁（又名递归锁）

- 指的是同一线程外层函数获得锁之后，内层递归函数仍然能获取该锁的代码，在同一个线程在外层方法获取锁的时候，在进入内层方法会自动获取锁。

  也就是说，线程可以进入任何一个它已经拥有的锁同步着的代码块。

- ReentrantLock/Synchronized 就是一个典型的可重入锁。可重入锁最大的作用就是避免死锁。

## 自旋锁

- 尝试获取锁的线程不会立即阻塞，而是采用循环的方式去尝试获取锁，这样的好处是减少线程上下文切换的消耗，缺点是循环会消耗CPU。

- SpinLockDemo

## 独占锁/共享锁（读写锁）

- 独占锁：指该锁一次只能被一个线程所持有。ReentrantLock和Synchronized都是独占锁。
- 共享锁：指该锁可被多个线程所持有。ReentrantReadWriteLock其读是共享锁，写是独占锁，这样是非常高效的。