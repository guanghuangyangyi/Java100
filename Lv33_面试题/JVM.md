# JVM

## GC Roots

- 什么是垃圾

  简单的说就是内存中已经不再被使用到的空间就是垃圾

- 如何判断一个对象是否可以被回收

  - 引用计数发（无人使用了）
  
     Java中,引用和对象是有关联的。如果要操作对象则必须用引用进行 。因此,很显然一个简单的办法是通过引用计数来判断一个对象是否可以回收。简单说,给对象中添加一个引用计数器。 每当有一个地方引用它，计数器值加1， 每当有一个引用失效时，计数器值减1。  任何时刻计数器值为零的对象就是不可能再被使用的,那么这个对象就是可回收对象 。
  
     那为什么主流的Java虚拟机里面都没有选用这种算法呢?其中最主要的原因是它很难解决对象之间相互循环引用的问题 
  
  - 枚举根节点做可达性分析（GC Roots）
  
    基本思路就是通过一系列名为“GC Roots”的对象作为气垫，从这个被称为GC Roots的对象开始向下搜索，如果一个对象到GC Roots没有任何引用链相连时，则说明此对象不可用。也即给定一个集合的引用作为根触发，通过引用关系遍历对象图，能被遍历到的（可到达的）对象就被判定为存活；没有被遍历到的就自然被判定为死亡。
  
    可做GC Roots的对象：
  
    - 虚拟机栈（栈帧中的局部变量区，也叫做局部变量表）
    - 方法区中的类静态属性引用的对象
    - 方法区中常量引用的对象
    - 本地方法中N（Native方法）引用的对象